{% extends "_varibles.njk" %}
{% import "macros/_base.njk" as base %}

{% macro btn(title, id, tagname, color, size, width, modal, href, toast, extendAttr, extendClass, shape, custom, icon, iconLeft, icSize, disabled = 'false', justifyContent, tooltip, fontSize, textColor, space, rounded, hover, active) %}
  <!-- button.btn -->
  {% if not tagname %}
    {% set tagname = settingButtonDefault.tagname %}
  {% endif %}
  {% if not color %}
    {% set color = settingButtonDefault.color %}
  {% endif %}
  {% if not size %}
    {% set size = settingButtonDefault.size %}
  {% endif %}
  {% if not icSize %}
    {% set icSize = settingButtonDefault.icSize %}
  {% endif %}
  {% if not space %}
    {% set space = settingButtonDefault.space %}
  {% endif %}
  {% if not rounded %}
    {% set rounded = settingButtonDefault.rounded %}
  {% endif %}
  {% if not hover %}
    {% set hover = settingButtonDefault.hover %}
  {% endif %}
  {% if not active %}
    {% set active = settingButtonDefault.active %}
  {% endif %}
  {% if not justifyContent %}
    {% set justifyContent = 'center' %}
  {% endif %}

  {% if modal %}
    {% set tagname = 'a' %}
    {% set modalAttr %}
    data-toggle="modal" data-target="{{ modal }}"
    {% endset %}
  {% endif %}

  {% if toast %}
    {% set tagname = 'a' %}
    {% set toastAttr %}
    data-toast="toast" toast-target="{{ toast }}"
    {% endset %}
  {% endif %}

  {% if shape == 'circle' %}
    {% set btnShape = 'ubtn-circle-size-' + size %}
  {% elseif shape == 'square' %}
    {% set btnShape = 'ubtn-circle-size-' + size + ' ubtn-square'%}
    {% else%}
    {% set btnShape = 'ubtn-size-' + size %}
  {% endif %}
  {% if width %}
    {% set btnWidth = 'ubtn-min-width-' + width %}
  {% endif %}

  {% if iconLeft %}
    {% set iconLeftContent %}
    <span class="ubtn-ic col-auto">
      <img src="{{iconLeft}}" alt="" class="ic-{{ icSize }}">
    </span>
    {% endset %}
  {% endif %}

  {% if icon %}
    {% set iconContent %}
    <span class="ubtn-ic col-auto">
      <img src="{{icon}}" alt="" class="ic-{{ icSize }}">
    </span>
    {% endset %}
  {% endif %}

  {% if fontSize %}
    {% set fontSizeText = fontSize %}
  {% endif %}

  {% if textColor %}
    {% set textColorText = 'color' + textColor %}
  {% endif %}

  {% if title %}
    {% set titleText %}
    <span class="ubtn-text {{ fontSizeText }} {{ textColorText }}">{{ title }}</span>
    {% endset %}
  {% endif %}

  {% if justifyContent %}
    {% set justifyContentText = 'justify-content-' + justifyContent %}
  {% endif %}

  {% if tooltip %}
    {% set tooltipContent %}
    data-tooltip="tooltip" title = "{{ tooltip | safe}}"
    {% endset %}
  {% endif %}

  {% if id %}
    {% set idTxt = 'id="' + (
    id | safe) + '"' %}
  {% endif %}

  {% if rounded == 'true' %}
    {% set roundedText = 'ubtn-rounded' %}
  {% endif %}

  {% if custom %}
    {% set btnContent %}
    {{ custom | safe }}
    {% endset %}
  {% else %}
    {% set btnContent %}
    <div class="row row-{{ space }} ubtn-inner {{ justifyContentText }}">
      {{ iconLeftContent | safe }}
      {{ titleText | safe }}
      {{ iconContent | safe }}
    </div>
    {% endset %}
  {% endif %}

  {% if disabled == 'true' %}
    {% set disabledText = 'disabled' %}
  {% endif %}

  {% if href %}
    {% set tagname = 'a' %}
    {% set hrefAttr %}
    href ="{{ href }}"
    {% endset %}
  {% endif %}

  {% if hover == 'true' %}
    {% set ubgHover = 'ubg-hover' %}
  {% endif %}

  {% if active == 'true' %}
    {% set ubgActive = 'ubg-active' %}
  {% endif %}

  <{{ tagname }} {{idTxt | safe}} class="ubtn ubg-{{ color }} {{ btnShape }} {{ btnWidth }} {{ roundedText }} {{ ubgHover }} {{ ubgActive }} {{ extendClass }}" {{ modalAttr | safe}} {{ toastAttr | safe }} {{ hrefAttr | safe}} {{ extendAttr | safe }} {{disabledText}} {{ tooltipContent | safe }}>
    <div class="ubtn-full">
      {{ btnContent | safe }}
    </div>
  </{{ tagname }}>
  <!-- end button.btn -->
{% endmacro %}

{% macro btnData(data) %}
  {{ btn(title = data.title, id = data.id, tagname = data.tagname, color = data.color, size = data.size, width = data.width, modal = data.modal, toast = data.toast, href = data.href, extendAttr = data.extendAttr, extendClass = data.extendClass, shape = data.shape, custom = data.custom, icon = data.icon, iconLeft = data.iconLeft, icSize = data.icSize, disabled = data.disabled, justifyContent = data.justifyContent, tooltip = data.tooltip, fontSize = data.fontSize, textColor = data.textColor, space = data.space, rounded = data.rounded) }}
{% endmacro %}

{% macro buttonNew(data) %}
  <!-- button.button -->
  {% set dataDefault = {
    title: undefinded,
    tagname: 'button',
    color: 'primary',
    justifyContent: 'center',
    size: 'default',
    iconLeft: undefinded,
    iconRight: undefinded,
    icSize: 'default',
    hover: true,
    active: true,
    text: {
      fontSize: undefinded,
      color: undefinded,
      fontWeight: undefinded
    }
  } %}
  {% set data = data | mergeDeep(dataDefault) %}

  {% set class %}
  ubtn
  {{ data.extendClass }}
  {% endset %}

  {% set content %}
  <div class="ubtn-inner">
    {% if data.iconLeft %}
      <span class="ubtn-ic ubtn-ic-left">
        <img src="{{data.iconLeft}}" alt="" class="ic-{{ data.icSize }}">
      </span>
    {% endif %}
    {% if data.title %}
      {% set ubtnTextClass %}
      ubtn-text
      {{ data.text.fontSize }}
      {{ 'color-' + data.text.color if data.text.color}}
      {% endset %}
      <span class="{{ ubtnTextClass | safe }}">{{ data.title }}</span>
    {% endif %}
    {% if data.iconRight %}
      <span class="ubtn-ic ubtn-ic-right">
        <img src="{{data.iconRight}}" alt="" class="ic-{{ data.icSize }}">
      </span>
    {% endif %}
  </div>
  {% endset %}

  {% set data = data | setAttribute('size', 'button-' + data.size) %}
  {% set data = data | setAttribute('content', content) %}
  {% set data = data | setAttribute('extendClass', class) %}
  {{ base.ubox(data) }}
  <!-- end button.button -->
{% endmacro %}